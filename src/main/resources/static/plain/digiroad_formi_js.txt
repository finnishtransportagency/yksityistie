

var tiedotOikeinId = 2;
//adds roads to tiedot oikein
$(document).on("click", ".tiedot_oikein_lisaa_tie", function(e) {

	var lisatytTiet = document.getElementsByClassName('tiedot_oikein_lisatyt_tiet')[0];
	console.log('lisatytTiet');
  //Creating elements
  //row
  var new_row = document.createElement('div');
  new_row.className = "row";
  
  //col-25
  var new_col_25 = document.createElement('div');
  new_col_25.className = "col-25";
  
  //col-59
  var new_col_59 = document.createElement('div');
	new_col_59.className = "col-59";
  
  //label
  var label = document.createElement('label');
 	label.innerHTML = '';
 
 	//input
  var input = document.createElement("input");
  input.type = "text";
  input.setAttribute("id", "tiedot_oikein_tien_nimi_" + tiedotOikeinId + "");
  
  //a
  var removeButton = document.createElement("a");
  removeButton.className = "remove_field_tiedot_oikein aFloatLeft";
  removeButton.innerHTML = "Poista";
  
  //appending children
  new_col_25.appendChild(label);
  
  new_col_59.appendChild(input);
  
  new_row.appendChild(new_col_25);
  
  new_row.appendChild(new_col_59);
  
  new_row.appendChild(removeButton);

  
  e.preventDefault();
  
  lisatytTiet.appendChild(new_row);
  tiedotOikeinId++;
});


// deletes added roads to Tiedot Oikein
$(document).on("click", ".remove_field_tiedot_oikein", function(e) {
  e.preventDefault();
  $(this).parent().remove();
});



var ilmoitaTiedotId = 2;
// adding roads to ilmoita tiekunnan tiedot
$(document).on("click", ".ilmoita_tiedot_lisaa_tie", function(e) {
	var lisatytTiet = document.getElementsByClassName('ilmoita_tiedot_lisatyt_tiet')[0];

	//container for all
	var ilmoitaTiedotContainer = document.createElement('div'); 
  
  //fieldset
	var fieldset = document.createElement('fieldset');
	
  
	//first row element -- Tien nimi
	var tienNimiRow = document.createElement('div');
  tienNimiRow.className = "row";

	var tienNimiCol25 = document.createElement('div');
  tienNimiCol25.className = "col-25";

	var tienNimiCol75 = document.createElement('div');
	tienNimiCol75.className = "col-75";
  
	var tienNimiLabel = document.createElement('label');
  tienNimiLabel.innerHTML = "Tien nimi";
  

	var tienNimiInput = document.createElement("input");
  tienNimiInput.type = "text";
  tienNimiInput.setAttribute("id", "ilmoita_tiedot_tien_nimi_" + ilmoitaTiedotId + "");
  
  //second row element -- Tiellä ei ole rajoituksia tai kieltoja checkbox
	var rajoituksetRow = document.createElement('div');
	rajoituksetRow.className = "row";

	var rajoituksetLabel = document.createElement('label');
  rajoituksetLabel.innerHTML = "Tiellä ei ole rajoituksia tai kieltoja";
  rajoituksetLabel.className = "plaintext";
 
	var rajoituksetCheckbox = document.createElement('input');
  rajoituksetCheckbox.type = 'checkbox';
  rajoituksetCheckbox.className = "tierajoitukset_checkbox";
  
  
  //tierajoitukset container
  var tierajoituksetContainer = document.createElement('div');
  tierajoituksetContainer.className = "tierajoitukset_container";
  
  //third row element -- painorajoitus
	var painoRow = document.createElement('div');
	painoRow.className = "row";
  
  var painoCol25 = document.createElement('div');
  painoCol25.className = "col-25";
  
	var painoCol75 = document.createElement('div');
	painoCol75.className = "col-75";

  var painoLabel = document.createElement('label');
  painoLabel.innerHTML = "Painorajoitus kg";

  var painoInput = document.createElement('input');
  painoInput.type = "text";
  painoInput.setAttribute("id", "ilmoita_tiedot_painorajoitus_" + ilmoitaTiedotId + "");


  //fourth row element -- Lisäkilvet
  var kilvetRow = document.createElement('div');
	kilvetRow.className = "row";
  
  var kilvetCol25 = document.createElement('div');
  kilvetCol25.className = "col-25";
  
	var kilvetCol75 = document.createElement('div');
	kilvetCol75.className = "col-75";

  var kilvetLabel = document.createElement('label');
  kilvetLabel.innerHTML = "Lisäkilvet";

  var kilvetInput = document.createElement('input');
  kilvetInput.type = "text";
  kilvetInput.setAttribute("id", "ilmoita_tiedot_lisakilvet_" + ilmoitaTiedotId + "");

  
  //fifth row element -- Lisäkilvet
  var voimassaoloRow = document.createElement('div');
	voimassaoloRow.className = "row";
  
  var voimassaoloCol25 = document.createElement('div');
  voimassaoloCol25.className = "col-25";
  
	var voimassaoloCol75 = document.createElement('div');
	voimassaoloCol75.className = "col-75";

  var voimassaoloLabel = document.createElement('label');
  voimassaoloLabel.innerHTML = "Arvio tilapäisestä tai toistuvasta voimassaoloajasta";
  voimassaoloLabel.className = "voimassaoloAika";

  var voimassaoloInput = document.createElement('input');
  voimassaoloInput.type = "text";
  voimassaoloInput.setAttribute("id", "ilmoita_tiedot_voimassaoloAika_" + ilmoitaTiedotId + "");


  //sixth row element -- Nopeusrajoitus
  var nopeusrajoitusRow = document.createElement('div');
	nopeusrajoitusRow.className = "row";
  
  var nopeusrajoitusCol25 = document.createElement('div');
  nopeusrajoitusCol25.className = "col-25";
  
	var nopeusrajoitusCol75 = document.createElement('div');
	nopeusrajoitusCol75.className = "col-75";

  var nopeusrajoitusLabel = document.createElement('label');
  nopeusrajoitusLabel.innerHTML = "Nopeusrajoitus";

  var nopeusrajoitusInput = document.createElement('input');
  nopeusrajoitusInput.type = "text";
  nopeusrajoitusInput.setAttribute("id", "ilmoita_tiedot_nopeusrajoitus_" + ilmoitaTiedotId + "");

  
  //seventh row element -- Karttalinkit
  var karttaLinkitRow = document.createElement('div');
	karttaLinkitRow.className = "row";
  
  var karttaLinkitCol25 = document.createElement('div');
  karttaLinkitCol25.className = "col-25";
  
	var karttaLinkitCol75 = document.createElement('div');
	karttaLinkitCol75.className = "col-75";

  var karttalinkitLabel = document.createElement('label');
  karttalinkitLabel.innerHTML = "Karttalinkit*";

  var karttalinkitTextArea = document.createElement('textarea');
  karttalinkitTextArea.maxlength = "5000";
  karttalinkitTextArea.setAttribute("id", "ilmoita_tiedot_karttalinkit_" + ilmoitaTiedotId + "");

  
  //remove button
  var poistaTieA = document.createElement("a");
  poistaTieA.className = "remove_field_ilmoita_tiedot aFloatRight";
  poistaTieA.innerHTML = "Poista";
  
  var poistaRow = document.createElement("div");
  poistaRow.className = "row";
  
  var poistaCol25 = document.createElement("div");
  poistaCol25.className = "col-25";
  
	var poistaCol75 = document.createElement("div");
	poistaCol75.className = "col-75";
  
  
	//email instructions
  var ohjeRow = document.createElement("div");
  ohjeRow.className = "row";
  
  var ohjeCol25 = document.createElement("div");
  ohjeCol25.className = "col-25"
  
  var ohjeCol75 = document.createElement("div");
  ohjeCol75.className = "col-75"
  
  var ohjeLabel = document.createElement("label");
  ohjeLabel.innerHTML = "*Rajoitusten ja kieltojen sijainneista voi toimittaa myös vapaamuotoisen kartan sähköpostitse osoitteeseen info@digiroad.fi. Otsikkokenttään tulee laittaa tiekunnan nimi."

  
	
/* the structure of the row elements
    row
      col-25
        label
      /col-25

      col-75
        input
      col-75
    /row
*/
  
  //row 1 -- tien nimi
  tienNimiCol25.appendChild(tienNimiLabel);
  tienNimiCol75.appendChild(tienNimiInput);
  tienNimiRow.appendChild(tienNimiCol25);
  tienNimiRow.appendChild(tienNimiCol75);
  
  
  //row 2 -- checkbox
  rajoituksetRow.appendChild(rajoituksetLabel);
  rajoituksetRow.appendChild(rajoituksetCheckbox);

	
  //row 3 -- painorajoitus kg
  painoCol25.appendChild(painoLabel);
  painoCol75.appendChild(painoInput);
 	painoRow.appendChild(painoCol25); 
	painoRow.appendChild(painoCol75);
  
  
  //row 4 -- lisäkilvet
  kilvetCol25.appendChild(kilvetLabel);
  kilvetCol75.appendChild(kilvetInput);
 	kilvetRow.appendChild(kilvetCol25); 
	kilvetRow.appendChild(kilvetCol75);
  
  
  //row 5 -- nopeusrajoitus
  nopeusrajoitusCol25.appendChild(nopeusrajoitusLabel);
  nopeusrajoitusCol75.appendChild(nopeusrajoitusInput);
 	nopeusrajoitusRow.appendChild(nopeusrajoitusCol25); 
	nopeusrajoitusRow.appendChild(nopeusrajoitusCol75);
  
  
  //row 6 -- voimassaolo
  voimassaoloCol25.appendChild(voimassaoloLabel);
  voimassaoloCol75.appendChild(voimassaoloInput);
 	voimassaoloRow.appendChild(voimassaoloCol25); 
	voimassaoloRow.appendChild(voimassaoloCol75);  
  
  
  //row 7 -- karttalinkit textfield
  karttaLinkitCol25.appendChild(karttalinkitLabel);
  karttaLinkitCol75.appendChild(karttalinkitTextArea);
 	karttaLinkitRow.appendChild(karttaLinkitCol25); 
	karttaLinkitRow.appendChild(karttaLinkitCol75);
  
  
  //row 8 delete road button
  poistaCol75.appendChild(poistaTieA);
  poistaRow.appendChild(poistaCol25);
  poistaRow.appendChild(poistaCol75);  
  
  
  //instruction label
  ohjeCol75.appendChild(ohjeLabel);
	ohjeRow.appendChild(ohjeCol25);
  ohjeRow.appendChild(ohjeCol75);
  

	//tierajoitukset container
	tierajoituksetContainer.appendChild(painoRow);
  tierajoituksetContainer.appendChild(kilvetRow);
  tierajoituksetContainer.appendChild(voimassaoloRow);
	tierajoituksetContainer.appendChild(nopeusrajoitusRow);
	tierajoituksetContainer.appendChild(karttaLinkitRow);
  tierajoituksetContainer.appendChild(ohjeRow);
  
	
  //appending elements to fieldset
	fieldset.appendChild(tienNimiRow);
  fieldset.appendChild(rajoituksetRow);
	fieldset.appendChild(tierajoituksetContainer);
  fieldset.appendChild(poistaRow);
  
  
  //fieldset to container
	ilmoitaTiedotContainer.appendChild(fieldset);


  e.preventDefault();
  
  //appending created elements to DOM
  lisatytTiet.appendChild(ilmoitaTiedotContainer);
  ilmoitaTiedotId++;
});



// deletes added Ilmoita Tiekunnan Tiedot road
$(document).on("click", ".remove_field_ilmoita_tiedot", function(e) {
  e.preventDefault();
  $(this).parent().parent().parent().parent().remove();
});



// depending on the value of toiminto-dropdown, the user should see 1 of the 2 different divs
// tiedot_oikein_container OR ilmoita_tiedot_container

function dropdownUpdate() {
  if (!this.value || this.value == 0) {
  	resetVakuutanCheckboxes();
    document.getElementById('ilmoita_tiedot_container').style.display = 'none';
    document.getElementById('tiedot_oikein_container').style.display = 'none';
		$(".tierajoitukset_checkbox").prop("checked", true);

   
   	// resets tiedot_oikein_container & ilmoita_tiedot_container fields
    resetFields('#tiedot_oikein_container');   
    resetFields('#ilmoita_tiedot_container');
    
    // deletes the added roads
    deleteRoads('.tiedot_oikein_lisatyt_tiet');
		deleteRoads('.ilmoita_tiedot_lisatyt_tiet');
    
    document.getElementById("tiedot_oikein_checkbox").required = false;
    document.getElementById("ilmoita_tiedot_checkbox").required = false;


  } else if (this.value == 1) {
  	resetVakuutanCheckboxes();
    document.getElementById('tiedot_oikein_container').style.display = 'block';
    document.getElementById('ilmoita_tiedot_container').style.display = 'none';
    
    
    // resets the ilmoita_tiedot_container fields
   	resetFields('#ilmoita_tiedot_container');
    deleteRoads('.ilmoita_tiedot_lisatyt_tiet');
    
    document.getElementById("tiedot_oikein_checkbox").required = true;
    document.getElementById("ilmoita_tiedot_checkbox").required = false;


  } else if (this.value == 2) {
  	resetVakuutanCheckboxes();
    document.getElementById('ilmoita_tiedot_container').style.display = 'block';
    document.getElementById('tiedot_oikein_container').style.display = 'none';
  
  	// resets the tiedot_oikein_container fields & deletes added roads
 		resetFields('#tiedot_oikein_container');
    deleteRoads('.tiedot_oikein_lisatyt_tiet');
    
    document.getElementById("tiedot_oikein_checkbox").required = false;
    document.getElementById("ilmoita_tiedot_checkbox").required = true;

     
  }
}

document.getElementById('toiminto_dropdown').addEventListener('change', dropdownUpdate);

document.addEventListener('load', dropdownUpdate);


// functionality of "Tiellä ei ole rajoituksia tai kieltoja" checkbox
// shows & hides the extra form fields
$(document).on("change", ".tierajoitukset_checkbox", function(e) {

  e.preventDefault();
  
  if (this.checked) {
  	// hides the extra fields
    $(this).parent().siblings('.tierajoitukset_container').hide();
    
    // clears the extra fields
    $(this).parent().siblings('.tierajoitukset_container').find('input, textarea').each(function() {   
      $(this).val('');
    });
    
  } else {
    $(this).parent().siblings('.tierajoitukset_container').show();

  }
});


// resets all input & textarea fields of container
function resetFields(container) {  
  $(container).find('input, textarea').each(function() {
     $(this).val('');
  });
}

// deletes all added divs of container
function deleteRoads(container) {  
  $(container).find('div').each(function() {
     $(this).remove();
  });
}

/*
function showIlmoitaTiedotRajoitukset() {
		$(".tierajoitukset_checkbox").prop("checked", true);
    $('.tierajoitukset_container').hide();

}*/

// resets the checkboxes
function resetVakuutanCheckboxes() {
  document.getElementById("tiedot_oikein_checkbox").checked = false;
  document.getElementById("ilmoita_tiedot_checkbox").checked = false;
}



